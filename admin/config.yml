# config.yml

backend:
  name: github
  repo: FFXIVPocketGuide/FFXIVPocketGuide
  branch: refresh
  base_url: https://us-central1-thinking-window-255219.cloudfunctions.net
  auth_endpoint: /ffxiv-pg-oauth/auth
  open_authoring: true
publish_mode: editorial_workflow
media_folder: 'assets/images/uploads'

guide-types: &guide-types
  label: 'Guide Type'
  name: 'guide-type'
  widget: 'select'
  options: 
    - Dungeon
    - Trial
    - Raid

guide-difficulties: &guide-difficulties
  label: 'Difficulty'
  name: 'difficulty'
  widget: 'select'
  options:
    - Normal
    - Hard
    - Extreme
    - Savage
    - Ultimate

expansions: &expansions
  label: 'Expansion'
  name: 'expansion'
  widget: 'select'
  options:
    - A Realm Reborn
    - Heavensward
    - Stormblood
    - Shadowbringers
    - Endwalker

boss-phases: &boss-phases
  label: 'Fight Phases'
  name: 'phases'
  widget: 'list'
  fields:
    - { label: 'Phase Number', name: 'key', widget: 'number', value_type: 'int' }
    - label: 'Phase Notes'
      name: 'notes'
      widget: 'list'
      fields:
        - { label: 'Note', name: 'note', widget: 'string' }
    - label: 'Duty Actions'
      name: 'duty-actions'
      widget: 'list'
      fields:
        - { label: 'Action Name', name: 'name', widget: 'string' }
        - label: 'Action Notes'
          name: 'notes'
          widget: 'list'
          fields:
            - { label: 'Note', name: 'note', widget: 'string' }
    - label: 'Attack Sequence'
      name: 'attack-sequence'
      widget: 'list'
      fields:
        - { label: 'Attack Name', name: 'name', widget: 'string' }
        - { label: 'Duty Action Requirement', name: 'duty-action-requirement', widget: boolean }

attack-regular: &attack-regular
  label: 'Regular Attack'
  name: 'attack-regular'
  widget: object
  fields:
    - { label: 'Attack Name', name: 'name', widget: 'string' }
    - { label: 'Related Phases', name: 'phases', widget: 'list' }

guide-bosses: &guide-bosses
  label: 'Bosses'
  name: 'bosses'
  widget: 'list'
  fields:
    - { label: 'Boss Name', name: 'name', widget: 'string' }
    - *boss-phases
    - label: 'Boss Attacks'
      name: 'attacks'
      widget: 'list'
      types:
        - *attack-regular
        - *attack-combo
        - *attack-variation

common-guide-fields: &common-guide-fields
  - { label: 'Layout', name: 'layout', widget: 'hidden', default: 'guide' }
  - *guide-types
  - { label: 'Instance Name', name: 'name', widget: 'string' }
  - { label: 'Guide URL', name: 'slug', widget: 'string' }
  - { label: 'Link to Video Guide', name: 'video-link', widget: 'string' }
  - *guide-difficulties
  - { label: 'Player Level', name: 'player-level', widget: 'number', value_type: 'int' }
  - { label: 'Item Level', name: 'item-level', widget: 'number', value_type: 'int' }
  - *expansions
  - { label: 'Patch', name: 'patch', widget: 'number', value_type: 'float' }
  - { label: 'Search Terms', name: 'search-terms', widget: 'list', hint: 'Comma separate each term.' }
  - *guide-bosses

collections:
  - name: '2.0-a-realm-reborn'
    label: 'A Realm Reborn'
    folder: '_guides/2.0-a-realm-reborn'
    create: true
    slug: '{{ fields.patch }}-{{ fields.slug }}'
    editor:
      preview: false
    fields:
      *common-guide-fields
  - name: '3.0-heavensward'
    label: 'Heavensward'
    folder: '_guides/3.0-heavensward'
    create: true
    slug: '{{ fields.patch }}-{{ fields.slug }}'
    editor:
      preview: false
    fields:
      *common-guide-fields
  - name: '4.0-stormblood'
    label: 'Stormblood'
    folder: '_guides/4.0-stormblood'
    create: true
    slug: '{{ fields.patch }}-{{ fields.slug }}'
    editor:
      preview: false
    fields:
      *common-guide-fields
  - name: '5.0-shadowbringers'
    label: 'Shadowbringers'
    folder: '_guides/5.0-shadowbringers'
    create: true
    slug: '{{ fields.patch }}-{{ fields.slug }}'
    editor:
      preview: false
    fields:
      *common-guide-fields
  - name: '6.0-endwalker'
    label: 'Endwalker'
    folder: '_guides/6.0-endwalker'
    create: true
    slug: '{{ fields.patch }}-{{ fields.slug }}'
    editor:
      preview: false
    fields:
      *common-guide-fields